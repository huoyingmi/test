<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>016.事件-愤怒的小鸟.html</title>
	<style>
		#wrap{
			position: absolute;
			top: 100px;
			left: 100px;
			width: 600px;
			height: 600px;
			border: 1px solid #000;
		}
		#bird{
			position: absolute;
			top: 0;
			left: 50%;
			margin-left: -30px;
			width: 60px;
			height: 60px;
			background-image: url(img/bird.jpg);
			background-repeat: no-repeat;
			background-size: contain;
		}
		.topline{
			position: absolute;
			top: 0;
			left: 100%;
			width: 30px;
			background: green;
		}
		.bottomline{
			position: absolute;
			bottom: 0;
			left: 100%;
			width: 30px;
			background: green;
		}
	</style>
</head>
<body>
	<div id="wrap">
		<div id="bird"></div>
	</div>
</body>
<script>
	function getRandom(min,max){
		return Math.round(min+(max-min)*Math.random());
	}
	//获取元素
	var oBird = document.getElementById('bird');
	var oWrap = document.getElementById('wrap');
	//获取定时器
	var BirdTimer = 0,addlineTimer = 0;
	//使小鸟向下运动，定义初始速度0
	var iSpeed = 0;
	var spaceHeight = 270;

	function addline(){
		var oTopline = document.createElement('div');
		var oBottomline = document.createElement('div');
		oTopline.className = 'topline';
		oBottomline.className = 'bottomline';
		var h = getRandom(100,300);
		oTopline.style.height = h + 'px';
		oBottomline.style.height = oWrap.offsetHeight -2 -h -spaceHeight + 'px';
		oWrap.appendChild(oTopline);
		oWrap.appendChild(oBottomline);

	}
	addline();
	//开启定时器之前一定要先关闭，消除定时器的影响
	clearInterval(BirdTimer);
	//定时器开启
	BirdTimer = setInterval(function(){
		//使小鸟向下做加速运动，定义加速速度
	   iSpeed += 1;
	   //定义一个上下运动距离
	   var t = oBird.offsetTop + iSpeed;
	   if(t<0){
		   t = 0;
		   die();
	   }else if(t > oWrap.offsetHeight -2 -oBird.offsetHeight){
	   	  t = oWrap.offsetHeight -2 -oBird.offsetHeight;
	   	  die();
	   }
	   // oBird.style.top = oBird.offsetTop + iSpeed + 'px';
	   oBird.style.top = t + 'px';
	},30);

	function die(){
		clearInterval(BirdTimer);
	}
	document.onkeydown = function(){
		iSpeed -= 10;
	}
</script>
</html>